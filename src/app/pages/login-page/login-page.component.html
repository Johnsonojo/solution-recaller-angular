<div class="login-wrapper">
  <app-landing-navbar></app-landing-navbar>
  <div>
    <div class="col-sm-12 col-md-5 container">
      <form
        class="form-containers"
        [formGroup]="loginForm"
        (ngSubmit)="loginUser()"
      >
        <h3 class="mb-4 text-center">Login</h3>
        <div class="form-group mb-4">
          <label class="mb-2" for="email">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            aria-describedby="emailHelp"
            placeholder="Enter email"
            formControlName="email"
            required
          />
          <div
            *ngIf="
              formControls.email.invalid &&
              (formControls.email.dirty || formControls.email.touched)
            "
          >
            <div
              *ngIf="formControls.email.errors?.['required']"
              class="alert alert-danger px-2 py-2 mt-2"
            >
              Email is required
            </div>
            <div
              *ngIf="formControls.email.errors?.['pattern']"
              class="alert alert-danger px-2 py-2 mt-2"
            >
              Email is invalid
            </div>
          </div>
        </div>

        <div class="form-group mb-3">
          <label class="mb-2" for="password">Password</label>

          <div class="input-group mb-1">
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              id="password"
              placeholder="Enter password"
              formControlName="password"
              required
            />
            <span class="input-group-text">
              <i
                style="cursor: pointer"
                (click)="showPassword = !showPassword"
                [ngClass]="{
                  'bi-eye': showPassword,
                  'bi-eye-slash': !showPassword
                }"
              ></i>
            </span>
          </div>

          <div
            *ngIf="
              formControls.password.invalid &&
              (formControls.password.dirty || formControls.password.touched)
            "
          >
            <div
              *ngIf="formControls.password.errors?.['required']"
              class="alert alert-danger px-2 py-2 mt-2"
            >
              Password is required
            </div>
            <div
              *ngIf="formControls.password.errors?.['minlength']"
              class="alert alert-danger px-2 py-2 mt-2"
            >
              Password must be at least 8 characters long.
            </div>
            <div
              *ngIf="formControls.password.errors?.['pattern']"
              class="alert alert-danger px-2 py-2 mt-2"
            >
              Password should be a combination of letters and numbers.
            </div>
          </div>
        </div>
        <button
          type="submit"
          class="col-12 mt-4 btn btn-dark btn-lg"
          [disabled]="!loginForm.valid"
        >
          <div class="spinner-border" role="status" *ngIf="isLoading">
            <span class="visually-hidden">Loading...</span>
          </div>

          <span *ngIf="!isLoading">Login</span>
        </button>
        <br />
        <div class="mt-4">
          <div class="text-center">
            Don't have an account yet?
            <a class="signup-link" href="/signup"> Register </a>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
