<app-main-navbar></app-main-navbar>
<div>
  <div class="col-sm-12 col-md-7 container mb-4">
    <form
      class="form-container"
      [formGroup]="postForm"
      (ngSubmit)="onSubmitPost()"
    >
      <h3 class="mb-2 text-center" *ngIf="!isUpdate">Add details</h3>
      <h3 class="mb-2 text-center" *ngIf="isUpdate">Edit details</h3>
      <div class="form-group mb-4">
        <label class="form-label" for="problemTitle">Problem title</label>
        <input
          type="text"
          class="form-control"
          id="problemTitle"
          placeholder="Enter problem title"
          formControlName="problemTitle"
          required
        />

        <div
          *ngIf="
            formControls.problemTitle.invalid &&
            (formControls.problemTitle.dirty ||
              formControls.problemTitle.touched)
          "
        >
          <div
            *ngIf="formControls.problemTitle.errors?.['required']"
            class="alert alert-danger py-2 mt-2"
          >
            Problem title is required
          </div>
          <div
            *ngIf="formControls.problemTitle.errors?.['minlength']"
            class="alert alert-danger p-2 mt-2"
          >
            Problem title must be at least 20 characters long.
          </div>
        </div>
      </div>

      <div class="form-group mb-4">
        <label class="form-label" for="problemDescription"
          >Problem description</label
        >
        <input
          type="text"
          class="form-control"
          id="problemDescription"
          placeholder="Enter problem description"
          formControlName="problemDescription"
          required
        />

        <div
          *ngIf="
            formControls.problemDescription.invalid &&
            (formControls.problemDescription.dirty ||
              formControls.problemDescription.touched)
          "
        >
          <div
            *ngIf="formControls.problemDescription.errors?.['required']"
            class="alert alert-danger p-2 mt-2"
          >
            Problem description is required
          </div>
          <div
            *ngIf="formControls.problemDescription.errors?.['minlength']"
            class="alert alert-danger p-2 mt-2"
          >
            Problem description must be at least 20 characters long.
          </div>
        </div>
      </div>

      <div class="form-group editor-wrapper mb-4">
        <label class="form-label" for="problemSolution">Problem solution</label>
        <quill-editor
          id="problemSolution"
          formControlName="problemSolution"
          class="form-control main-editor px-0 py-0"
          [placeholder]="placeholder"
          [styles]="editorStyle"
          [modules]="editorModules"
        ></quill-editor>

        <div
          *ngIf="
            formControls.problemSolution.invalid &&
            (formControls.problemSolution.dirty ||
              formControls.problemSolution.touched)
          "
        >
          <div
            *ngIf="formControls.problemSolution.errors?.['required']"
            class="alert alert-danger p-2 mt-2"
          >
            Problem solution is required
          </div>
          <div
            *ngIf="formControls.problemSolution.errors?.['minlength']"
            class="alert alert-danger p-2 mt-2"
          >
            Problem solution must be at least 20 characters long.
          </div>
        </div>
      </div>

      <button
        type="submit"
        class="col-12 mt-2 btn btn-dark btn-lg"
        [disabled]="postForm.invalid"
      >
        <div class="spinner-border" role="status" *ngIf="isLoading">
          <span class="visually-hidden">Loading...</span>
        </div>

        <span *ngIf="!isLoading && !isUpdate">Create </span>
        <span *ngIf="!isLoading && isUpdate">Update</span>
      </button>
    </form>
  </div>
</div>
